"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate";
exports.ids = ["pages/api/generate"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/generate.ts */ \"(api)/./src/pages/api/generate.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate\",\n        pathname: \"/api/generate\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZnZW5lcmF0ZS50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN3RDtBQUN4RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsdURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHVEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Jlc3VtZS1qb2ItbWF0Y2hlci8/NDNlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9nZW5lcmF0ZS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/generate.ts":
/*!***********************************!*\
  !*** ./src/pages/api/generate.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Simple rate limiting\nconst RATE_LIMIT_WINDOW = 60 * 1000; // 1 minute\nconst MAX_REQUESTS_PER_WINDOW = 5;\nconst requestCounts = new Map();\nasync function handler(req, res) {\n    const ip = req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress;\n    const now = Date.now();\n    const userRequests = requestCounts.get(ip) || {\n        count: 0,\n        timestamp: now\n    };\n    if (now - userRequests.timestamp > RATE_LIMIT_WINDOW) {\n        userRequests.count = 0;\n        userRequests.timestamp = now;\n    }\n    if (userRequests.count >= MAX_REQUESTS_PER_WINDOW) {\n        return res.status(429).json({\n            error: \"Too many requests. Please try again later.\"\n        });\n    }\n    userRequests.count++;\n    requestCounts.set(ip, userRequests);\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    if (!process.env.OPENAI_API_KEY) {\n        return res.status(500).json({\n            error: \"OpenAI API key not configured\",\n            details: \"Please add your OpenAI API key to the Secrets tool (Tools > Secrets)\"\n        });\n    }\n    const openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        apiKey: process.env.OPENAI_API_KEY\n    });\n    try {\n        const { resume, jobDescription, type } = req.body;\n        if (!resume || !jobDescription) {\n            return res.status(400).json({\n                error: \"Resume and job description are required\"\n            });\n        }\n        if (!type || ![\n            \"resume\",\n            \"cover-letter\"\n        ].includes(type)) {\n            return res.status(400).json({\n                error: \"Invalid type specified\"\n            });\n        }\n        const systemPrompt = type === \"resume\" ? `You are an ATS expert and resume consultant. Analyze the resume against the job description and provide structured feedback with an ATS match score.` : `You are a professional cover letter writer. Create a concise 150-word cover letter matching the candidate to the role.`;\n        const userPrompt = type === \"resume\" ? `Analyze the resume against the job description and provide:\n\n1. ATS Score\nCalculate and show an estimated ATS match score (0-100%). Consider keyword matches, skills alignment, and experience relevance.\n\n2. Missing Keywords\nList important keywords from the job description that are missing or underemphasized in the resume.\n\n3. Skills Analysis\n• List skills that should be added or emphasized\n• Suggest skills that could be reworded for better ATS matching\n\n4. Key Recommendations\nProvide specific, actionable recommendations for improving the resume, focusing on:\n• Content improvements\n• Format suggestions\n• Keyword optimization\n• Achievement quantification\n\nBe specific and concise. Format with bullet points for readability.\n\nResume: \"${resume}\"\nJob Description: \"${jobDescription}\"` : `Write a 150-word professional cover letter that:\n- Shows enthusiasm and relevant experience\n- Highlights 2-3 key achievements\n- Ends with a call to action\nNo double spacing between paragraphs.\n\nResume: \"${resume}\"\nJob Description: \"${jobDescription}\"`;\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: systemPrompt\n                },\n                {\n                    role: \"user\",\n                    content: userPrompt\n                }\n            ],\n            temperature: type === \"resume\" ? 0.3 : 0.5,\n            max_tokens: type === \"resume\" ? 1000 : 500\n        });\n        // Format the cover letter for Word document if needed\n        let result = completion.choices[0]?.message?.content;\n        if (!result) {\n            throw new Error(\"No content generated\");\n        }\n        if (type === \"cover-letter\") {\n            result = result.replace(/\\n\\n/g, \"\\n\"); // Remove double line breaks\n        }\n        res.setHeader(\"Content-Type\", \"application/json\");\n        res.status(200).json({\n            result\n        });\n    } catch (error) {\n        console.error(\"OpenAI Error:\", error);\n        const errorMessage = error.response?.data?.error?.message || error.message || \"Unknown error\";\n        // Check for quota exceeded error\n        if (errorMessage.includes(\"exceeded your current quota\")) {\n            return res.status(500).json({\n                error: \"API Quota Exceeded\",\n                details: \"The OpenAI API quota has been exceeded. Please check the API key's billing status and ensure there are sufficient credits available.\"\n            });\n        }\n        res.status(500).json({\n            error: \"Failed to generate content\",\n            details: errorMessage\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlsQixTQUFTLGdCQUFnQjtZQUMzQmUsU0FBU0EsT0FBT0ksT0FBTyxDQUFDLFNBQVMsT0FBTyw0QkFBNEI7UUFDdEU7UUFFQTNDLElBQUk0QyxTQUFTLENBQUMsZ0JBQWdCO1FBQzlCNUMsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFMkI7UUFBTztJQUNoQyxFQUFFLE9BQU8xQixPQUFZO1FBQ25CZ0MsUUFBUWhDLEtBQUssQ0FBQyxpQkFBaUJBO1FBQy9CLE1BQU1pQyxlQUNKakMsTUFBTWtDLFFBQVEsRUFBRUMsTUFBTW5DLE9BQU80QixXQUFXNUIsTUFBTTRCLE9BQU8sSUFBSTtRQUUzRCxpQ0FBaUM7UUFDakMsSUFBSUssYUFBYXBCLFFBQVEsQ0FBQyxnQ0FBZ0M7WUFDeEQsT0FBTzFCLElBQUlXLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO2dCQUNQTSxTQUFTO1lBQ1g7UUFDRjtRQUVBbkIsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsT0FBTztZQUNQTSxTQUFTMkI7UUFDWDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZXN1bWUtam9iLW1hdGNoZXIvLi9zcmMvcGFnZXMvYXBpL2dlbmVyYXRlLnRzP2E4ZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIjtcblxuLy8gU2ltcGxlIHJhdGUgbGltaXRpbmdcbmNvbnN0IFJBVEVfTElNSVRfV0lORE9XID0gNjAgKiAxMDAwOyAvLyAxIG1pbnV0ZVxuY29uc3QgTUFYX1JFUVVFU1RTX1BFUl9XSU5ET1cgPSA1O1xuY29uc3QgcmVxdWVzdENvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCB7IGNvdW50OiBudW1iZXI7IHRpbWVzdGFtcDogbnVtYmVyIH0+KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlLFxuKSB7XG4gIGNvbnN0IGlwID0gcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcztcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgXG4gIGNvbnN0IHVzZXJSZXF1ZXN0cyA9IHJlcXVlc3RDb3VudHMuZ2V0KGlwIGFzIHN0cmluZykgfHwgeyBjb3VudDogMCwgdGltZXN0YW1wOiBub3cgfTtcbiAgaWYgKG5vdyAtIHVzZXJSZXF1ZXN0cy50aW1lc3RhbXAgPiBSQVRFX0xJTUlUX1dJTkRPVykge1xuICAgIHVzZXJSZXF1ZXN0cy5jb3VudCA9IDA7XG4gICAgdXNlclJlcXVlc3RzLnRpbWVzdGFtcCA9IG5vdztcbiAgfVxuICBcbiAgaWYgKHVzZXJSZXF1ZXN0cy5jb3VudCA+PSBNQVhfUkVRVUVTVFNfUEVSX1dJTkRPVykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQyOSkuanNvbih7IGVycm9yOiBcIlRvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiIH0pO1xuICB9XG4gIFxuICB1c2VyUmVxdWVzdHMuY291bnQrKztcbiAgcmVxdWVzdENvdW50cy5zZXQoaXAgYXMgc3RyaW5nLCB1c2VyUmVxdWVzdHMpO1xuXG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBcIk1ldGhvZCBub3QgYWxsb3dlZFwiIH0pO1xuICB9XG5cbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogXCJPcGVuQUkgQVBJIGtleSBub3QgY29uZmlndXJlZFwiLFxuICAgICAgZGV0YWlsczogXCJQbGVhc2UgYWRkIHlvdXIgT3BlbkFJIEFQSSBrZXkgdG8gdGhlIFNlY3JldHMgdG9vbCAoVG9vbHMgPiBTZWNyZXRzKVwiLFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gICAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbiAgfSk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHJlc3VtZSwgam9iRGVzY3JpcHRpb24sIHR5cGUgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFyZXN1bWUgfHwgIWpvYkRlc2NyaXB0aW9uKSB7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgICAuanNvbih7IGVycm9yOiBcIlJlc3VtZSBhbmQgam9iIGRlc2NyaXB0aW9uIGFyZSByZXF1aXJlZFwiIH0pO1xuICAgIH1cblxuICAgIGlmICghdHlwZSB8fCAhWydyZXN1bWUnLCAnY292ZXItbGV0dGVyJ10uaW5jbHVkZXModHlwZSkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkludmFsaWQgdHlwZSBzcGVjaWZpZWRcIiB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSB0eXBlID09PSAncmVzdW1lJyBcbiAgICAgID8gYFlvdSBhcmUgYW4gQVRTIGV4cGVydCBhbmQgcmVzdW1lIGNvbnN1bHRhbnQuIEFuYWx5emUgdGhlIHJlc3VtZSBhZ2FpbnN0IHRoZSBqb2IgZGVzY3JpcHRpb24gYW5kIHByb3ZpZGUgc3RydWN0dXJlZCBmZWVkYmFjayB3aXRoIGFuIEFUUyBtYXRjaCBzY29yZS5gXG4gICAgICA6IGBZb3UgYXJlIGEgcHJvZmVzc2lvbmFsIGNvdmVyIGxldHRlciB3cml0ZXIuIENyZWF0ZSBhIGNvbmNpc2UgMTUwLXdvcmQgY292ZXIgbGV0dGVyIG1hdGNoaW5nIHRoZSBjYW5kaWRhdGUgdG8gdGhlIHJvbGUuYDtcblxuICAgIGNvbnN0IHVzZXJQcm9tcHQgPSB0eXBlID09PSAncmVzdW1lJ1xuICAgICAgPyBgQW5hbHl6ZSB0aGUgcmVzdW1lIGFnYWluc3QgdGhlIGpvYiBkZXNjcmlwdGlvbiBhbmQgcHJvdmlkZTpcblxuMS4gQVRTIFNjb3JlXG5DYWxjdWxhdGUgYW5kIHNob3cgYW4gZXN0aW1hdGVkIEFUUyBtYXRjaCBzY29yZSAoMC0xMDAlKS4gQ29uc2lkZXIga2V5d29yZCBtYXRjaGVzLCBza2lsbHMgYWxpZ25tZW50LCBhbmQgZXhwZXJpZW5jZSByZWxldmFuY2UuXG5cbjIuIE1pc3NpbmcgS2V5d29yZHNcbkxpc3QgaW1wb3J0YW50IGtleXdvcmRzIGZyb20gdGhlIGpvYiBkZXNjcmlwdGlvbiB0aGF0IGFyZSBtaXNzaW5nIG9yIHVuZGVyZW1waGFzaXplZCBpbiB0aGUgcmVzdW1lLlxuXG4zLiBTa2lsbHMgQW5hbHlzaXNcbuKAoiBMaXN0IHNraWxscyB0aGF0IHNob3VsZCBiZSBhZGRlZCBvciBlbXBoYXNpemVkXG7igKIgU3VnZ2VzdCBza2lsbHMgdGhhdCBjb3VsZCBiZSByZXdvcmRlZCBmb3IgYmV0dGVyIEFUUyBtYXRjaGluZ1xuXG40LiBLZXkgUmVjb21tZW5kYXRpb25zXG5Qcm92aWRlIHNwZWNpZmljLCBhY3Rpb25hYmxlIHJlY29tbWVuZGF0aW9ucyBmb3IgaW1wcm92aW5nIHRoZSByZXN1bWUsIGZvY3VzaW5nIG9uOlxu4oCiIENvbnRlbnQgaW1wcm92ZW1lbnRzXG7igKIgRm9ybWF0IHN1Z2dlc3Rpb25zXG7igKIgS2V5d29yZCBvcHRpbWl6YXRpb25cbuKAoiBBY2hpZXZlbWVudCBxdWFudGlmaWNhdGlvblxuXG5CZSBzcGVjaWZpYyBhbmQgY29uY2lzZS4gRm9ybWF0IHdpdGggYnVsbGV0IHBvaW50cyBmb3IgcmVhZGFiaWxpdHkuXG5cblJlc3VtZTogXCIke3Jlc3VtZX1cIlxuSm9iIERlc2NyaXB0aW9uOiBcIiR7am9iRGVzY3JpcHRpb259XCJgXG4gICAgICA6IGBXcml0ZSBhIDE1MC13b3JkIHByb2Zlc3Npb25hbCBjb3ZlciBsZXR0ZXIgdGhhdDpcbi0gU2hvd3MgZW50aHVzaWFzbSBhbmQgcmVsZXZhbnQgZXhwZXJpZW5jZVxuLSBIaWdobGlnaHRzIDItMyBrZXkgYWNoaWV2ZW1lbnRzXG4tIEVuZHMgd2l0aCBhIGNhbGwgdG8gYWN0aW9uXG5ObyBkb3VibGUgc3BhY2luZyBiZXR3ZWVuIHBhcmFncmFwaHMuXG5cblJlc3VtZTogXCIke3Jlc3VtZX1cIlxuSm9iIERlc2NyaXB0aW9uOiBcIiR7am9iRGVzY3JpcHRpb259XCJgO1xuXG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogXCJncHQtNFwiLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gICAgICAgICAgY29udGVudDogc3lzdGVtUHJvbXB0LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogdXNlclByb21wdCxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogdHlwZSA9PT0gJ3Jlc3VtZScgPyAwLjMgOiAwLjUsXG4gICAgICBtYXhfdG9rZW5zOiB0eXBlID09PSAncmVzdW1lJyA/IDEwMDAgOiA1MDAsXG4gICAgfSk7XG5cbiAgICAvLyBGb3JtYXQgdGhlIGNvdmVyIGxldHRlciBmb3IgV29yZCBkb2N1bWVudCBpZiBuZWVkZWRcbiAgICBsZXQgcmVzdWx0ID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50O1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb250ZW50IGdlbmVyYXRlZFwiKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHR5cGUgPT09ICdjb3Zlci1sZXR0ZXInKSB7XG4gICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFxuXFxuL2csICdcXG4nKTsgLy8gUmVtb3ZlIGRvdWJsZSBsaW5lIGJyZWFrc1xuICAgIH1cblxuICAgIHJlcy5zZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcmVzdWx0IH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihcIk9wZW5BSSBFcnJvcjpcIiwgZXJyb3IpO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICBlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZSB8fCBcIlVua25vd24gZXJyb3JcIjtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcXVvdGEgZXhjZWVkZWQgZXJyb3JcbiAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZXhjZWVkZWQgeW91ciBjdXJyZW50IHF1b3RhXCIpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJBUEkgUXVvdGEgRXhjZWVkZWRcIixcbiAgICAgICAgZGV0YWlsczogXCJUaGUgT3BlbkFJIEFQSSBxdW90YSBoYXMgYmVlbiBleGNlZWRlZC4gUGxlYXNlIGNoZWNrIHRoZSBBUEkga2V5J3MgYmlsbGluZyBzdGF0dXMgYW5kIGVuc3VyZSB0aGVyZSBhcmUgc3VmZmljaWVudCBjcmVkaXRzIGF2YWlsYWJsZS5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBnZW5lcmF0ZSBjb250ZW50XCIsXG4gICAgICBkZXRhaWxzOiBlcnJvck1lc3NhZ2UsXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJSQVRFX0xJTUlUX1dJTkRPVyIsIk1BWF9SRVFVRVNUU19QRVJfV0lORE9XIiwicmVxdWVzdENvdW50cyIsIk1hcCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJpcCIsImhlYWRlcnMiLCJzb2NrZXQiLCJyZW1vdGVBZGRyZXNzIiwibm93IiwiRGF0ZSIsInVzZXJSZXF1ZXN0cyIsImdldCIsImNvdW50IiwidGltZXN0YW1wIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwic2V0IiwibWV0aG9kIiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiZGV0YWlscyIsIm9wZW5haSIsImFwaUtleSIsInJlc3VtZSIsImpvYkRlc2NyaXB0aW9uIiwidHlwZSIsImJvZHkiLCJpbmNsdWRlcyIsInN5c3RlbVByb21wdCIsInVzZXJQcm9tcHQiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwicmVzdWx0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJFcnJvciIsInJlcGxhY2UiLCJzZXRIZWFkZXIiLCJjb25zb2xlIiwiZXJyb3JNZXNzYWdlIiwicmVzcG9uc2UiLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/generate.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();